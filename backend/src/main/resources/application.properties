spring.application.name=backend
spring.data.mongodb.uri=mongodb+srv://KavishkaUdara:grants.255@learnbook.itrkpdr.mongodb.net/socialmedia
spring.data.mongodb.database=learnbook
server.port=8081

# Dynamic server address configuration - binds to 0.0.0.0 (all interfaces) locally
# Remove specific IP binding which causes "Cannot assign requested address" error
server.address=0.0.0.0

server.error.include-message=always
server.error.include-binding-errors=always

# File upload settings
spring.servlet.multipart.enabled=true
spring.servlet.multipart.file-size-threshold=2KB
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
upload.directory=uploads
spring.mvc.servlet.load-on-startup=1

# Improved error handling and logging
logging.level.org.springframework.web=DEBUG
logging.level.com.example.backend=DEBUG
server.error.include-stacktrace=never
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.add-mappings=false

# Video upload settings
video.max.duration.seconds=30
video.allowed.types=video/mp4,video/quicktime

# Security settings
spring.security.user.name=user
spring.security.user.password=password
spring.security.basic.enabled=true
spring.security.filter.order=1

# CORS settings - Expanded for both localhost and server IP
spring.web.cors.allowed-origins=http://localhost:3000,http://localhost:3001,http://localhost:3002,http://165.232.179.196:3000,http://165.232.179.196:3001,http://165.232.179.196:3002
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS,HEAD
spring.web.cors.allowed-headers=*
spring.web.cors.exposed-headers=Authorization,Content-Disposition
spring.web.cors.allow-credentials=true
spring.web.cors.max-age=3600

# Google OAuth
google.oauth.client-id=793547860619-hccacc9oqnrjiphbve9hkvbef24o6sji.apps.googleusercontent.com

# MongoDB connection settings
spring.data.mongodb.auto-index-creation=true

# File Storage Properties - Handle both localhost and server
file.upload-dir=uploads
# Use environment variable with fallback for flexibility
app.base-url=${SERVER_URL:http://localhost:8081}

# Create an application-prod.properties file for production settings
# To use production settings: java -jar app.jar --spring.profiles.active=prod

# Add resource handler for uploaded files
spring.mvc.static-path-pattern=/uploads/**
spring.web.resources.static-locations=file:uploads/